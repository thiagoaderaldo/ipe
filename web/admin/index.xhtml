<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="/ipe-template.xhtml">
        <ui:define name="title">
            <h:outputText value="Benvindo."></h:outputText>
        </ui:define>
        <ui:define name="body">

            <h:form id="formDashboard">
                <p:panelGrid id="dshbrdResumo">
                    <p:poll interval="60" update="qtdAtdSemEquipe,qtdOcrAbertas,qtdOcrrNaRegional,nomedaRegional,qtdOcrrTipologia,tipoDeTipologia, qtdDeOcrrBairro,nomeDoBairro"/>
                    <div id="" class="row" style="box-sizing: border-box">

                        <div class="col-lg-3 col-xs-6">
                            <!-- small box -->
                            <div class="small-box bg-red">
                                <div class="inner">
                                    <h3>
                                        <h:outputText id="qtdAtdSemEquipe" value="#{vwDshbrdResumoController.vwDshbrdResumo.qtdAtdSemEquipe}"/>
                                    </h3>
                                    <p>
                                        Ocorrências sem equipes.
                                    </p>
                                </div>
                                <a href="#" class="small-box-footer">
                                    Mais informações... <i class="fa fa-arrow-circle-right"></i>
                                </a>
                            </div>
                        </div><!-- ./col -->
                        <div class="col-lg-3 col-xs-6">
                            <!-- small box -->
                            <div class="small-box bg-green">
                                <div class="inner">
                                    <h3>
                                        <h:outputText id="qtdOcrAbertas" value="#{vwDshbrdResumoController.vwDshbrdResumo.qtdOcrAbertas}"/><sup style="font-size: 20px"></sup>
                                    </h3>
                                    <p>
                                        Ocorrências abertas hoje.
                                    </p>
                                </div>

                                <a href="#" class="small-box-footer">
                                    Mais informações... <i class="fa fa-arrow-circle-right"></i>
                                </a>
                            </div>
                        </div><!-- ./col -->
                        <div class="col-lg-2 col-xs-6">
                            <!-- small box -->
                            <div class="small-box bg-light-blue">
                                <div class="inner">
                                    <h3>
                                        <h:outputText id="qtdOcrrNaRegional" value="#{vwDshbrdResumoController.vwDshbrdResumo.qtdOcrrNaRegional}"/>
                                    </h3>
                                    <p>
                                        Ocorrências na <h:outputText id="nomedaRegional" value="#{vwDshbrdResumoController.vwDshbrdResumo.nomedaRegional}"/>.
                                    </p>
                                </div>
                                <a href="#" class="small-box-footer">
                                    Mais informações... <i class="fa fa-arrow-circle-right"></i>
                                </a>
                            </div>
                        </div><!-- ./col -->                    
                        <div class="col-lg-2 col-xs-6">
                            <!-- small box -->
                            <div class="small-box bg-aqua">
                                <div class="inner">
                                    <h3>
                                        <h:outputText id="qtdOcrrTipologia" value="#{vwDshbrdResumoController.vwDshbrdResumo.qtdOcrrTipologia}"/>
                                    </h3>
                                    <p>
                                        <h:outputText id="tipoDeTipologia" value="#{vwDshbrdResumoController.vwDshbrdResumo.tipoDeTipologia}"/>
                                    </p>
                                </div>
                                <a href="#" class="small-box-footer">
                                    Mais informações... <i class="fa fa-arrow-circle-right"></i>
                                </a>
                            </div>
                        </div><!-- ./col -->                    
                        <div class="col-lg-2 col-xs-6">
                            <!-- small box -->
                            <div class="small-box bg-yellow">
                                <div class="inner">
                                    <h3>
                                        <h:outputText id="qtdDeOcrrBairro" value="#{vwDshbrdResumoController.vwDshbrdResumo.qtdDeOcrrBairro}"/>
                                    </h3>
                                    <p>
                                        <h:outputText id="nomeDoBairro" value="#{vwDshbrdResumoController.vwDshbrdResumo.nomeDoBairro}"/>
                                    </p>
                                </div>

                                <a href="#" class="small-box-footer">
                                    Mais informações... <i class="fa fa-arrow-circle-right"></i>
                                </a>
                            </div>
                        </div><!-- ./col -->                    
                    </div>
                </p:panelGrid>

                <div class="row">
                    <section class="col-lg-6">                   
                        <p:panel id="noticias" 
                                 header="Notícias" 
                                 toggleable="true" 
                                 toggleTitle="Recolher painel de notícias."
                                 styleClass="ui-panel-success"
                                 > 

                            <p style="text-align: justify;">
                                <table align="center" style="max-width: 500px">
                                    <tr>
                                        <td align="center">
                                            <img width="190px" 
                                                 height="100px" 
                                                 alt="Iguana" 
                                                 src="/ipe/resources/images/ipe-300x199.png"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="center"><h2>Versão 0.1.2 - 30/04/2014</h2></td>

                                    </tr>

                                    <tr>
                                        <td>
                                            <p><b style="color: red; font-size: small">NOVIDADES DA VERSÃO 0.1.2 - 30/04/2014: </b></p>
                                            <ul>
                                                <li style="font-size: small;padding-top: 5px">Modificações na tela de cadastro, conforme solicitado.</li>
                                                <li style="font-size: small;padding-top: 5px">A tabela com os atendimentos cadastrados estão agora com um belo design. É possível acessar na página <b>Cadastrar > Atendimento > Exibir todas as ocorrências cadastradas.</b></li>
                                            </ul>
                                        </td>
                                    </tr>                         
                                    <tr>
                                        <td>
                                            <p><b style="color: green; font-size: small">NOVIDADES DA VERSÃO 0.1.1 - 23/04/2014: </b></p>
                                            <ul>
                                                <li style="font-size: small;padding-top: 5px">Criação do sistema com os requisitos levantados.</li>
                                            </ul>
                                        </td>
                                    </tr>                         
                                </table>
                            </p>  
                        </p:panel>  
                    </section>
                    <section class="col-lg-6">
                        <p:poll interval="61" update="atdBySerCurrentDate"/>
                        <p:panel id="dados"
                                 header="Gráfico - Dia Corrente"
                                 styleClass="ui-panel-primary"
                                 toggleable="true">
                            <h:outputText value="Qtd. Atd x Regional"/>
                            <p:chart id="atdBySerCurrentDate" type="pie" model="#{pcAtdBySer.atdBySerCurrentDate}" responsive="true" style="min-height:300px"/>
                        </p:panel>

                    </section>


                </div>


                <div class="row">

                    <section class="col-lg-6">
                        <p:poll interval="62" update="lastSevenAtdBySer"/>
                        <p:panel id="Info"
                                 header="Gráfico - Evolução nos últimos 7 dias"
                                 styleClass="ui-panel-info"
                                 toggleable="true"
                                 >
                            <p:chart id="lastSevenAtdBySer" responsive="true" type="bar" model="#{bcAtdBySer.lastSevenAtdBySer}"/>
                        </p:panel>

                    </section>
                    <section class="col-lg-6"> 
                        <p:poll interval="63" update="lineOcrCurrentMonth"/>
                        <p:panel id="riscos"
                                 header="Gráfico - Linha de ocorrências"
                                 styleClass="ui-panel-danger"
                                 toggleable="true">
                            <p:chart id="lineOcrCurrentMonth" type="line" model="#{lcAtdBySer.lineModel}" responsive="true"/>
                        </p:panel>
                    </section>
                    <div class="row">

                        <section class="col-lg-12" style="padding: 0px 35px 0px 35px"> 
                            <p:panel id="gmapsearch"  
                                     header="Google Maps" 
                                     toggleable="true" 
                                     toggleTitle="Recolher painel de resumo das atividades."
                                     styleClass="ui-panel-warning"
                                     >
                                <script type="text/javascript">
                                    function geocode() {                                
                                        PF('geoGmap').geocode(document.getElementById('formDashboard:address').value);                
                                    }
 
                                    function reverseGeocode() {
                                        var lat = document.getElementById('lat').value,
                                        lng = document.getElementById('lng').value;
 
                                        PF('revGeoMap').reverseGeocode(lat, lng);
                                    }
                                </script>


                                <h:form prependId="false">
                                    <h:panelGrid columns="3">
                                        <p:outputLabel for="address" value="Digite o endereço:" />

                                        <p:inputText id="address" />

                                        <p:commandButton value="Pesquisar" 
                                                         icon="fa fa-search" 
                                                         onclick="geocode()" 
                                                         styleClass="CyanButton"
                                                         />
                                    </h:panelGrid>
                                    <br/>
                                    <p:gmap id="geoGmap" 
                                            widgetVar="geoGmap"
                                            center="#{geocodeView.centerGeoMap}"
                                            model="#{geocodeView.geoModel}"
                                            zoom="11" 
                                            type="ROADMAP"  
                                            style="min-width:180px;min-height:400px" 
                                            streetView="true"
                                            >
                                        <p:ajax event="geocode" listener="#{geocodeView.onGeocode}" update="@this" />
                                    </p:gmap>
                                </h:form>

                            </p:panel>
                        </section>
                    </div>
                </div>
            </h:form>

        </ui:define>
    </ui:composition>







</html>

